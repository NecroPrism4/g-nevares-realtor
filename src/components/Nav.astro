---
import siteConfig, { type Link } from "../site.config";
import Hamburger from "./Hamburger.astro";
import SiteIdentity from "./SiteIdentity.astro";
import NavLinks from "./NavLinks.astro";
import Button from "./Button.astro";
import { withBase } from "../utils/helpers";
const { activePage } = Astro.props;
---

<header class="relative z-10">
  <nav class="mx-auto mt-6 flex w-[min(1100px,100%-2rem)] items-center justify-between gap-4 rounded-md bg-neutral-900/95 px-5 py-3 text-white shadow-xl ring-1 ring-white/10">
    <a href={withBase("")} class="flex items-center gap-2 text-white">
      <SiteIdentity textSize="text-xl" />
    </a>
    <div class="hidden items-center gap-6 sm:flex">
      {(<NavLinks activePage={activePage} links={siteConfig.headerNavLinks} />)}
    </div>
    <Button href="#contact" class="border border-white/70 bg-transparent px-5 py-2 text-[0.7rem] uppercase tracking-[0.25em] text-white hover:bg-white/10">
      Contáctame
    </Button>
    <Hamburger />
  </nav>
  <div
    id="mobile-links"
    class="font-light animated h-0 m-0 opacity-0 top-0 w-full"
  >
    <span class="close-menu">❌</span>
    <NavLinks
      activePage={activePage}
      links={siteConfig.headerNavLinks}
      isMobileLink={true}
    />
  </div>
</header>
<script is:inline>
  document.querySelector("#hamburger-menu").addEventListener("click", () => {
    console.log("clicked...");
    document.querySelector("#mobile-links").classList.remove("slideOutUp");
    document.querySelector("#mobile-links").classList.add("expanded");
    document.querySelector("#mobile-links").classList.add("slideInDown");
  });

  document.querySelector(".close-menu").addEventListener("click", () => {
    console.log("clicked...");
    document.querySelector("#mobile-links").classList.add("slideOutUp");
    document.querySelector("#mobile-links").classList.add("expanded");
    document.querySelector("#mobile-links").classList.remove("slideInDown");
  });
</script>

<style>
  @media (orientation: portrait) {
    #mobile-links.expanded {
      align-items: end;
      background-color: #0000007a;
      backdrop-filter: blur(72px);
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      justify-content: end;
      position: absolute;
      z-index: 10;
      opacity: 1;
      padding: 1rem 2rem;
      width: 100vw;
      top: 0;
      min-height: fit-content;
      border-bottom-left-radius: 0.5rem;
      border-bottom-right-radius: 0.5rem;
    }
    html.light #mobile-links.expanded {
      background-color: #ffffff6a;
    }
  }
</style>
